# Synatra - Complete Documentation

> The AI workspace where you collaborate with AI agents like colleagues. They handle the work, generate the UI, and ask when they need you.

This file contains the complete documentation for Synatra, optimized for LLM context.

---

## Introduction

Synatra is a platform for human-AI collaboration. Instead of building and maintaining internal tools, you chat with AI agents that:

- Execute tasks using multiple LLM providers (OpenAI, Anthropic, Google)
- Call user-defined tools with configurable approval workflows
- Connect to external resources (PostgreSQL, MySQL, REST API, Stripe, GitHub)
- Generate outputs (tables, charts) and request input (forms, confirmations)
- Respond to triggers (cron schedules, webhooks, app events)
- Maintain persistent conversation threads with approval gates

### Key Features

**Human-in-the-Loop**: Configurable approval workflows before agents execute sensitive actions.

**On-Demand UI**: Agents generate tables, charts, forms, and confirmations as needed.

**Secure Sandbox**: Tool code runs in isolated VMs with memory limits.

**Durable Execution**: Temporal-based orchestration with automatic state recovery.

**Proactive Triggers**: Cron schedules, webhooks, and app events to start workflows automatically.

---

## Quickstart

1. Go to https://synatrahq.com/login and create an account.
2. Navigate to Agents and create your first agent. Configure the model, system prompt, and assign tools.
3. Go to the Inbox, select a channel, and start a new thread with your agent.

---

## Concepts

### Agents

Agents are the core execution units in Synatra. Each agent is an AI executor with versioned configurations.

An agent consists of:

- **Model**: LLM provider (OpenAI, Anthropic, Google) and model settings
- **System prompt**: Instructions that define agent behavior
- **Tools**: User-defined functions the agent can call
- **Subagents**: Other agents that can be delegated subtasks

#### Model Configuration

| Provider  | Models                      |
| --------- | --------------------------- |
| OpenAI    | GPT-4o, GPT-4 Turbo, o1     |
| Anthropic | Claude 3.5 Sonnet, Claude 4 |
| Google    | Gemini 1.5 Pro, Gemini 2    |

#### Versioning

- **Working copy**: Draft state for iterating on configurations
- **Releases**: Published, immutable versions with semantic versioning

---

### Tools

Tools are user-defined functions that agents can invoke during conversations.

Each tool has:

- **Name and description**: How the agent identifies the tool
- **Input schema**: JSON Schema defining expected parameters
- **Code**: JavaScript executed in a secure sandbox
- **Approval settings**: When human review is required

#### Approval Settings

| Setting           | Description                                          |
| ----------------- | ---------------------------------------------------- |
| `requiresReview`  | Whether human approval is needed before execution    |
| `approvalAuthority` | Who can approve: `owner_only` or `any_member`      |
| `selfApproval`    | Whether the requester can approve their own calls    |

#### Secure Execution

Tool code runs in an isolated sandbox with:

- Memory limits
- Execution timeout (configurable, 100ms to 60s)
- No access to the host filesystem

#### Example Tool

```javascript
const { customerId } = input

const customer = await context.resources.stripe.request(
  "GET",
  `/v1/customers/${customerId}`,
)

return {
  email: customer.email,
  name: customer.name,
}
```

---

### Resources

Resources represent external systems that tools can interact with.

| Resource Type | Description                     | Connection Mode     |
| ------------- | ------------------------------- | ------------------- |
| PostgreSQL    | Connect to PostgreSQL databases | Direct or Connector |
| MySQL         | Connect to MySQL databases      | Direct or Connector |
| REST API      | Connect to any REST API         | Direct              |
| Stripe        | Access Stripe payment APIs      | Direct              |
| GitHub        | Access GitHub repository APIs   | Direct (OAuth)      |

All resource credentials are encrypted at rest and decrypted only in the Resource Gateway.

#### Using Resources in Tools

```javascript
// PostgreSQL / MySQL
const result = await context.resources.db.query(
  "SELECT * FROM users WHERE id = $1",
  [userId],
)

// REST API
const data = await context.resources.api.request("GET", "/users")

// Stripe
const customer = await context.resources.stripe.request(
  "GET",
  `/v1/customers/${customerId}`,
)

// GitHub
const issues = await context.resources.github.request(
  "GET",
  "/repos/myorg/myrepo/issues",
)
```

#### Connector

For databases in private VPCs, deploy a Connector in your network. The Connector establishes an outbound-only WebSocket connection to Synatra and routes queries securely.

---

### Environments

Environments provide deployment contexts for resource isolation.

| Environment | Purpose                          |
| ----------- | -------------------------------- |
| Production  | Live customer data and workflows |
| Staging     | Pre-release testing              |
| Development | Local development and debugging  |

Each environment has its own resource credentials. Use environments to safely test changes before deploying to production.

---

### Triggers

Triggers allow agents to start workflows automatically based on external events.

| Type      | Description                        |
| --------- | ---------------------------------- |
| Schedule  | Cron-based recurring execution     |
| Webhook   | HTTP endpoint for external systems |
| App Event | Events from connected apps         |

#### Template Mode

Use `{{ variable }}` syntax to inject payload data:

```
A new issue was created: {{ issue.title }}
Repository: {{ repository.name }}
```

#### Script Mode

Execute JavaScript to generate prompts dynamically:

```javascript
if (payload.action === "closed") {
  return { action: "skip", reason: "Ignoring closed issues" }
}

return { action: "run", prompt: `New issue: ${payload.issue.title}` }
```

---

### Prompts

Prompts are reusable templates for starting agent conversations with structured input parameters.

#### Template Mode

Use `{{ variable }}` syntax to inject input values:

```
Generate a report for {{ customerName }}.
Date range: {{ startDate }} to {{ endDate }}
```

#### Script Mode

Execute JavaScript to generate prompts dynamically. The `input` and `context` variables are available globally.

---

### Subagents

Subagents allow an agent to delegate subtasks to other agents. The parent agent can invoke subagents as tools and receive their results.

**Depth limit**: Subagents cannot delegate to other subagents (max depth: 1).

---

### Runs

A Run is a single execution unit within a thread. Each time an agent processes a request, it creates a run.

#### Limits

| Limit       | Default | Max   |
| ----------- | ------- | ----- |
| Max steps   | 50      | 100   |
| Max tokens  | 100,000 | 1,000,000 |
| Timeout     | 10 min  | 60 min |

---

### Inbox

The Inbox contains Channels and Threads for organizing conversations.

#### Channels

Channels group related threads by team, project, or topic. Each channel can have specific agents assigned.

#### Threads

A Thread is a conversation session. Thread statuses:

| Status            | Description                           |
| ----------------- | ------------------------------------- |
| Running           | Agent is actively processing          |
| Waiting for input | Agent needs user approval or response |
| Completed         | Conversation finished successfully    |
| Failed            | An error occurred                     |

---

### Outputs

Agents can generate structured outputs:

| Type      | Description                   |
| --------- | ----------------------------- |
| Table     | Sortable data tables          |
| Chart     | Line, bar, and pie charts     |
| Markdown  | Formatted text content        |
| Key-Value | Structured data display       |

---

### Human Requests

Agents can request human input:

| Type         | Description                          |
| ------------ | ------------------------------------ |
| Approval     | Approve/reject tool execution        |
| Form         | Collect structured input from users  |
| Confirmation | Simple yes/no decisions              |

---

## Links

- Website: https://synatrahq.com
- Documentation: https://synatrahq.com/docs
- GitHub: https://github.com/synatrahq/synatra
